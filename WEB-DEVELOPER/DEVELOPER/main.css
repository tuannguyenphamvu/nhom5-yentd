/* ═══════════════════════════════════════════════════════════════
   AI TRAFFIC CONTROL — PREMIUM ENTERPRISE DASHBOARD v4.0 (2026)
   Design: Military/Tech Neon-Futuristic · Syne + DM Sans + Space Mono
   Inspired by xAI Grok, Tesla AI Interfaces · Combined & Enhanced
═══════════════════════════════════════════════════════════════ */
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500;600;700&family=Syne:wght@400;600;700;800&display=swap');

:root {
  /* ── Base Colors (nâng deeper black) ── */
  --void:       #03060d;
  --base:       #060b16;
  --surface:    #0a1020;
  --panel:      #0d1628;
  --card:       #111b2e;
  --hover:      #162034;

  /* ── Border / Rim (nâng opacity cho vivid) ── */
  --rim:        rgba(32,202,255,0.13);
  --rim2:       rgba(32,202,255,0.28);

  /* ── Cyan ── */
  --cyan:       #20caff;
  --cyan-glow:  rgba(32,202,255,0.45);
  --cyan-soft:  rgba(32,202,255,0.15);

  /* ── Green ── */
  --green:      #00e87a;
  --green-glow: rgba(0,232,122,0.40);
  --green-soft: rgba(0,232,122,0.12);

  /* ── Red ── */
  --red:        #ff3a5c;
  --red-glow:   rgba(255,58,92,0.40);
  --red-soft:   rgba(255,58,92,0.12);

  /* ── Amber ── */
  --amber:      #ffb020;
  --amber-glow: rgba(255,176,32,0.40);
  --amber-soft: rgba(255,176,32,0.12);

  /* ── Text ── */
  --t1:  #f0f5ff;
  --t2:  #a0b2d0;
  --t3:  #506080;

  /* ── Fonts ── */
  --mono: 'Space Mono', monospace;
  --syne: 'Syne', sans-serif;
  --ui:   'DM Sans', sans-serif;

  /* ── Layout ── */
  --sb:     240px;
  --topbar: 56px;
  --r:  9px;
  --r2: 13px;

  /* ── Premium New Vars (2026) ── */
  --neon-gradient: linear-gradient(135deg, var(--cyan) 0%, var(--green) 100%);
  --neon-border:   linear-gradient(135deg, rgba(32,202,255,0.4), rgba(0,232,122,0.2));
  --particle-speed: 2s;
  --glow-depth:     20px;
  --card-blur:      14px;
}

/* ═══ RESET & BASE ═══ */
*,*::before,*::after { box-sizing:border-box; margin:0; padding:0; }
html { font-size:13px; scroll-behavior:smooth; }
body { font-family:var(--ui); background:var(--void); color:var(--t1); height:100vh; overflow:hidden; display:flex; flex-direction:column; position:relative; }
a { text-decoration:none; color:inherit; }
button { cursor:pointer; border:none; font-family:var(--ui); outline:none; }
input, select { font-family:var(--ui); outline:none; }
canvas { display:block; }

/* ── Particle canvas (mới 2026) ── */
.particle-overlay {
  position:fixed; inset:0;
  pointer-events:none;
  mix-blend-mode:screen;
  z-index:0; opacity:.18;
  width:100% !important; height:100% !important;
}

/* ── Scrollbar (neon upgrade) ── */
::-webkit-scrollbar { width:5px; height:5px; }
::-webkit-scrollbar-track { background:rgba(32,202,255,.03); }
::-webkit-scrollbar-thumb { background:rgba(32,202,255,.2); border-radius:3px; }
::-webkit-scrollbar-thumb:hover { background:rgba(32,202,255,.4); }

/* ═══ BACKGROUND (nâng với stronger gradients + animated grid) ═══ */
body::before {
  content:''; pointer-events:none; position:fixed; inset:0; z-index:0;
  background:
    radial-gradient(ellipse 70% 50% at 20% 0%,  rgba(32,202,255,0.09) 0%, transparent 70%),
    radial-gradient(ellipse 50% 40% at 80% 100%, rgba(0,232,122,0.06) 0%, transparent 70%),
    repeating-linear-gradient(0deg,   transparent, transparent 39px, rgba(32,202,255,0.03) 39px, rgba(32,202,255,0.03) 40px),
    repeating-linear-gradient(90deg,  transparent, transparent 39px, rgba(32,202,255,0.02) 39px, rgba(32,202,255,0.02) 40px);
  animation: gridDrift 40s linear infinite;
}
@keyframes gridDrift {
  from { background-position: 0 0, 0 0, 0 0, 0 0; }
  to   { background-position: 0 0, 0 0, 60px 60px, 60px 60px; }
}

/* ═══ KEYFRAMES (all — original + new 2026) ═══ */
@keyframes blink        { 0%,100% { opacity:1; }   50% { opacity:.25; } }
@keyframes tlPulse      { 0%,100% { box-shadow:0 0 22px var(--red-glow); } 50% { box-shadow:0 0 40px rgba(255,58,92,.6); } }
@keyframes emergBlink   { 0%,100% { opacity:1; }   50% { opacity:.4; } }
@keyframes ctxBad       { 0%,100% { background:var(--red-soft); } 50% { background:rgba(255,58,92,.2); } }
@keyframes vcardSlide   { from { transform:translateX(12px); opacity:0; } to { transform:translateX(0); opacity:1; } }
@keyframes lapRing      { 0% { opacity:.5; transform:translate(-50%,-50%) scale(.8); } 100% { opacity:0; transform:translate(-50%,-50%) scale(1.4); } }
@keyframes devAlarm     { 0%,100% { box-shadow:none; } 50% { box-shadow:0 0 15px rgba(255,58,92,.2); } }
@keyframes mIn          { from { transform:scale(.96); opacity:0; } to { transform:scale(1); opacity:1; } }
@keyframes toastIn      { from { transform:translateX(18px); opacity:0; } to { transform:translateX(0); opacity:1; } }
@keyframes vcardSlide   { from { transform:translateX(12px); opacity:0; } to { transform:translateX(0); opacity:1; } }
/* ── NEW 2026 keyframes ── */
@keyframes neonBlink    { 0%,100% { opacity:1; box-shadow:0 0 10px var(--amber-glow); } 50% { opacity:.5; box-shadow:0 0 24px var(--amber-glow); } }
@keyframes bannerGlow   { from { box-shadow:0 1px 20px rgba(32,202,255,.08); } to { box-shadow:0 1px 36px rgba(32,202,255,.2); } }
@keyframes ledPulse     { 0%,100% { box-shadow:0 0 5px currentColor; }  50% { box-shadow:0 0 16px currentColor, 0 0 32px currentColor; } }
@keyframes orbitSpin    { to { transform:translate(-50%,-50%) rotate(360deg); } }
@keyframes scanNeon     { 0% { top:-10%; } 100% { top:110%; } }
@keyframes emergNeon    { 0%,100% { box-shadow:0 0 8px rgba(255,58,92,.4); } 50% { box-shadow:0 0 28px rgba(255,58,92,.9), 0 0 56px rgba(255,58,92,.3); } }
@keyframes sectionReveal{ from { opacity:0; transform:translateY(7px); } to { opacity:1; transform:translateY(0); } }
@keyframes barShimmer   { from { transform:translateX(-100%); } to { transform:translateX(100%); } }
@keyframes badgePulse   { 0%,100% { box-shadow:0 0 6px rgba(255,58,92,.4); } 50% { box-shadow:0 0 16px rgba(255,58,92,.9); } }
@keyframes kpiGlow      { 0%,100% { box-shadow:0 4px 24px rgba(0,0,0,.4); } 50% { box-shadow:0 4px 36px rgba(32,202,255,.08); } }
@keyframes ctxLedOk     { 0%,100% { box-shadow:0 0 6px var(--green); }  50% { box-shadow:0 0 14px var(--green), 0 0 28px var(--green-glow); } }

/* ═══ DEMO BANNER (neon upgrade) ═══ */
#demoBanner {
  position:relative; z-index:200;
  background:linear-gradient(90deg, rgba(255,176,32,.10), rgba(32,202,255,.06) 50%, rgba(0,232,122,.05));
  border-bottom:1px solid rgba(255,176,32,0.30);
  box-shadow:0 1px 20px rgba(32,202,255,.06);
  padding:7px 20px; display:flex; align-items:center; gap:10px;
  font-size:11.5px; color:var(--amber); flex-shrink:0;
  animation:bannerGlow 4s ease-in-out infinite alternate;
}
#demoBanner.hidden { display:none; }
.demo-pulse {
  width:7px; height:7px; border-radius:50%;
  background:var(--amber); flex-shrink:0;
  animation:neonBlink 1.2s infinite;
}
#demoBanner span { flex:1; }
.demo-connect-btn {
  padding:4px 14px; border-radius:4px;
  font-size:11px; font-weight:700;
  border:1px solid var(--amber); color:var(--amber);
  background:none; transition:.22s; letter-spacing:.5px;
  box-shadow:0 0 0 1px rgba(255,176,32,.2);
}
.demo-connect-btn:hover { background:var(--amber); color:var(--void); box-shadow:0 0 16px var(--amber-glow); transform:translateY(-1px); }

/* ═══ SHELL ═══ */
#shell { flex:1; display:flex; overflow:hidden; position:relative; z-index:1; }

/* ── High-tech shell scanline overlay ── */
#shell::before {
  content:''; position:fixed; inset:0;
  background:repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(32,202,255,.012) 2px, rgba(32,202,255,.012) 4px);
  pointer-events:none; z-index:0;
}

/* ═══ SIDEBAR (neon upgraded) ═══ */
#sidebar {
  width:var(--sb); flex-shrink:0;
  background:var(--panel);
  border-right:1px solid rgba(32,202,255,.18);
  box-shadow:4px 0 40px rgba(0,0,0,.6), 2px 0 0 rgba(32,202,255,.07);
  display:flex; flex-direction:column;
  transition:width .28s cubic-bezier(.4,0,.2,1);
  overflow:hidden; z-index:50;
}
#sidebar.slim { width:60px; }
#sidebar.slim .sb-brand-name, #sidebar.slim .sb-brand-sub, #sidebar.slim .nav-label,
#sidebar.slim .nav-badge, #sidebar.slim .sb-conn-text, #sidebar.slim .logout-text,
#sidebar.slim .sb-ai-insights { display:none; }

/* Brand */
.sb-brand { display:flex; align-items:center; gap:11px; padding:16px 14px 14px; border-bottom:1px solid var(--rim); flex-shrink:0; }
.sb-logo   { width:32px; height:32px; flex-shrink:0; display:flex; align-items:center; justify-content:center; position:relative; }
.sb-logo svg { width:32px; height:32px; }

/* ── Orbit rings (mới 2026) ── */
.orbit-ring {
  position:absolute; border-radius:50%;
  border:1px solid rgba(32,202,255,.2);
  pointer-events:none;
}
.orbit-ring.r1 {
  width:46px; height:46px;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  animation:orbitSpin 8s linear infinite;
}
.orbit-ring.r2 {
  width:58px; height:58px;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  animation:orbitSpin 14s linear infinite reverse;
  border-color:rgba(0,232,122,.15);
}

/* ── Brand text (neon gradient) ── */
.sb-brand-name {
  font-family:var(--syne); font-size:11px; font-weight:800;
  letter-spacing:2px; display:block;
  background:linear-gradient(90deg, #20caff, #00e87a);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(0 0 6px rgba(32,202,255,.4));
}
.sb-brand-sub {
  display:block; font-size:8.5px; letter-spacing:1.5px;
  color:rgba(32,202,255,.5); margin-top:2px; text-transform:uppercase;
}

/* ── Connection status ── */
.sb-conn { padding:9px 14px; border-bottom:1px solid var(--rim); flex-shrink:0; }
.sb-conn-inner { display:flex; align-items:center; gap:8px; font-size:11px; }
.conn-led { width:8px; height:8px; border-radius:50%; flex-shrink:0; background:var(--t3); transition:.3s; }
.conn-led.online  { background:var(--green); animation:ledPulse 2s ease-in-out infinite; }
.conn-led.demo    { background:var(--amber); box-shadow:0 0 8px var(--amber-glow); animation:ledPulse 2s ease-in-out infinite; }
.conn-led.offline { background:var(--red); }
.sb-conn-text { font-size:11px; color:var(--t2); }

/* ── Nav items (neon hover upgraded) ── */
.sb-nav { flex:1; padding:10px 8px; display:flex; flex-direction:column; gap:2px; overflow-y:auto; overflow-x:hidden; }
.nav-item {
  display:flex; align-items:center; gap:10px;
  padding:9px 10px; border-radius:var(--r);
  font-size:12.5px; font-weight:500; color:var(--t2);
  transition:.18s; cursor:pointer; position:relative;
  white-space:nowrap; border:1px solid transparent;
  overflow:hidden;
  -webkit-user-select:none; user-select:none;
}
.nav-item::before {
  content:''; position:absolute; left:-1px; top:50%;
  transform:translateY(-50%);
  width:0; height:60%;
  background:linear-gradient(90deg, rgba(32,202,255,.4), transparent);
  border-radius:0 4px 4px 0;
  transition:width .22s ease;
}
.nav-item:hover { background:var(--hover); color:var(--t1); border-color:var(--rim); }
.nav-item:hover::before { width:3px; }
.nav-item.active {
  background:linear-gradient(90deg, rgba(32,202,255,.12), rgba(32,202,255,.04));
  color:var(--cyan);
  border-color:rgba(32,202,255,.22);
  box-shadow:inset 0 0 24px rgba(32,202,255,.04);
}
.nav-item.active::before { width:3px; background:var(--cyan); box-shadow:0 0 8px var(--cyan); }
.nav-icon  { width:17px; height:17px; flex-shrink:0; }
.nav-label { flex:1; }
.nav-badge {
  font-family:var(--mono); font-size:9px; font-weight:700;
  padding:1px 6px; border-radius:99px;
  background:var(--red); color:#fff;
  min-width:18px; text-align:center;
}
.nav-badge.zero { background:var(--t3); }
.nav-badge:not(.zero) { animation:badgePulse 2s ease-in-out infinite; }

/* ── AI Insights widget (mới 2026) ── */
.sb-ai-insights {
  margin:12px 12px 0;
  background:linear-gradient(135deg, rgba(32,202,255,.07), rgba(0,232,122,.04));
  border:1px solid rgba(32,202,255,.16);
  border-radius:10px; padding:12px;
  flex-shrink:0;
}
.ai-insights-title {
  font-size:9.5px; font-weight:700; font-family:var(--syne);
  letter-spacing:.12em; text-transform:uppercase;
  color:var(--cyan); margin-bottom:8px;
  display:flex; align-items:center; gap:5px;
}
.ai-insights-title::before {
  content:''; width:6px; height:6px; border-radius:50%;
  background:var(--cyan); flex-shrink:0;
  animation:ledPulse 2s ease-in-out infinite;
}
.ai-insight-item {
  display:flex; justify-content:space-between; align-items:center;
  padding:5px 0; border-bottom:1px solid rgba(255,255,255,.04);
  font-size:10px;
}
.ai-insight-item:last-child { border-bottom:none; }
.ai-insight-label { color:var(--t3); }
.ai-insight-val   { font-family:var(--mono); font-size:10px; color:var(--green); font-weight:700; }
.ai-insight-val.warn { color:var(--amber); }
.ai-insight-val.cyn  { color:var(--cyan); }

/* ── Sidebar bottom ── */
.sb-bottom { padding:12px 10px; border-top:1px solid var(--rim); flex-shrink:0; }
.sb-clock { font-family:var(--mono); font-size:22px; font-weight:700; color:var(--cyan); letter-spacing:3px; text-align:center; text-shadow:0 0 18px var(--cyan-glow); display:block; }
.sb-date  { font-size:10px; color:var(--t3); text-align:center; margin-bottom:10px; font-family:var(--mono); }
.logout-btn {
  width:100%; display:flex; align-items:center; justify-content:center; gap:8px;
  padding:8px; border-radius:var(--r);
  background:var(--red-soft); color:var(--red);
  border:1px solid rgba(255,58,92,0.25);
  font-size:11.5px; font-weight:600; transition:.18s;
}
.logout-btn svg { width:14px; height:14px; flex-shrink:0; }
.logout-btn:hover { background:var(--red); color:#fff; box-shadow:0 0 16px var(--red-glow); }

/* ═══ MAIN ═══ */
#main { flex:1; display:flex; flex-direction:column; overflow:hidden; background:var(--base); }

/* ── Topbar (neon upgraded) ── */
.topbar {
  height:var(--topbar); flex-shrink:0;
  background:var(--panel);
  border-bottom:1px solid rgba(32,202,255,.14);
  box-shadow:0 2px 24px rgba(0,0,0,.5);
  display:flex; align-items:center; justify-content:space-between; padding:0 18px;
}
.topbar-l { display:flex; align-items:center; gap:12px; }
.sb-toggle { display:flex; flex-direction:column; gap:3.5px; padding:6px; background:none; border-radius:4px; }
.sb-toggle span { display:block; width:17px; height:1.5px; background:var(--t2); border-radius:2px; transition:.2s; }
.sb-toggle:hover span { background:var(--cyan); }
.page-title {
  font-size:13.5px; font-weight:700; letter-spacing:.2px;
  background:linear-gradient(90deg, #e8edf7, rgba(32,202,255,.85));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  background-clip:text;
}
.topbar-r { display:flex; align-items:center; gap:12px; }
.topbar-divider { width:1px; height:18px; background:var(--rim); }
.weather-pill {
  display:flex; align-items:center; gap:6px;
  font-size:11.5px; color:var(--t2);
  background:rgba(32,202,255,.05); padding:4px 10px;
  border-radius:99px; border:1px solid rgba(32,202,255,.12);
}
.user-pill { display:flex; align-items:center; gap:8px; font-size:12px; font-weight:500; }
.user-av {
  width:28px; height:28px; border-radius:50%;
  background:linear-gradient(135deg, rgba(32,202,255,.35), rgba(0,232,122,.25));
  color:var(--void); display:flex; align-items:center; justify-content:center;
  font-weight:700; font-size:11px;
  box-shadow:0 0 12px rgba(32,202,255,.2);
}

/* ── Content / Sections ── */
.content { flex:1; overflow-y:auto; overflow-x:hidden; padding:16px 18px; }
.section { display:none; }
.section.active { display:block; animation:sectionReveal .3s ease; }

/* ═══ PANEL (neon upgraded) ═══ */
.panel {
  background:var(--panel);
  border:1px solid rgba(32,202,255,.12);
  border-radius:var(--r2); overflow:hidden;
  transition:border-color .22s, box-shadow .22s;
  box-shadow:0 4px 32px rgba(0,0,0,.45), 0 0 0 1px rgba(32,202,255,.03);
}
.panel:hover {
  border-color:rgba(32,202,255,.24);
  box-shadow:0 8px 44px rgba(0,0,0,.55), 0 0 28px rgba(32,202,255,.055);
}
.ph { display:flex; align-items:center; justify-content:space-between; padding:11px 14px; border-bottom:1px solid var(--rim); background:var(--card); }
.ph-title { font-size:10.5px; font-weight:700; letter-spacing:1.2px; text-transform:uppercase; color:var(--t2); }
.ph-badge { font-family:var(--mono); font-size:9.5px; font-weight:700; padding:2px 8px; border-radius:99px; background:var(--green-soft); color:var(--green); border:1px solid rgba(0,232,122,.25); }
.ph-badge.warn  { background:var(--red-soft);   color:var(--red);   border-color:rgba(255,58,92,.25); }
.ph-badge.amber { background:var(--amber-soft);  color:var(--amber); border-color:rgba(255,176,32,.25); }

/* ═══ KPI ROW (neon upgraded) ═══ */
.kpi-row { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-bottom:14px; }
.kpi {
  background:var(--panel);
  border:1px solid rgba(32,202,255,.1);
  border-radius:var(--r2); padding:14px 16px;
  display:flex; align-items:flex-start; gap:12px;
  position:relative; overflow:hidden;
  transition:border-color .2s, transform .2s, box-shadow .2s;
  cursor:default;
  animation:kpiGlow 5s ease-in-out infinite;
}
.kpi::after { content:''; position:absolute; top:0; left:0; right:0; height:2px; border-radius:2px 2px 0 0; }
.kpi.c-red::after   { background:var(--red);   box-shadow:0 0 10px var(--red); }
.kpi.c-cyan::after  { background:var(--cyan);  box-shadow:0 0 10px var(--cyan); }
.kpi.c-amber::after { background:var(--amber); box-shadow:0 0 10px var(--amber); }
.kpi.c-green::after { background:var(--green); box-shadow:0 0 10px var(--green); }
/* ── KPI radial glow (mới 2026) ── */
.kpi::before {
  content:''; position:absolute; inset:0; pointer-events:none;
  background:radial-gradient(ellipse at 120% 50%, rgba(32,202,255,.055), transparent 65%);
}
.kpi.c-red::before   { background:radial-gradient(ellipse at 120% 50%, rgba(255,58,92,.07),  transparent 65%); }
.kpi.c-amber::before { background:radial-gradient(ellipse at 120% 50%, rgba(255,176,32,.07), transparent 65%); }
.kpi.c-green::before { background:radial-gradient(ellipse at 120% 50%, rgba(0,232,122,.07),  transparent 65%); }
.kpi:hover { border-color:rgba(32,202,255,.22); transform:translateY(-2px); box-shadow:0 8px 28px rgba(0,0,0,.5); }
.kpi-ico { width:40px; height:40px; border-radius:8px; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
.kpi-ico svg { width:20px; height:20px; }
.kpi-ico.r { background:var(--red-soft);   color:var(--red); }
.kpi-ico.c { background:var(--cyan-soft);  color:var(--cyan); }
.kpi-ico.a { background:var(--amber-soft); color:var(--amber); }
.kpi-ico.g { background:var(--green-soft); color:var(--green); }
.kpi-num { font-family:var(--mono); font-size:28px; font-weight:700; color:var(--t1); line-height:1; }
.kpi.c-red   .kpi-num { text-shadow:0 0 20px rgba(255,58,92,.4); }
.kpi.c-green .kpi-num { text-shadow:0 0 20px rgba(0,232,122,.4); }
.kpi.c-amber .kpi-num { text-shadow:0 0 20px rgba(255,176,32,.4); }
.kpi.c-cyan  .kpi-num { text-shadow:0 0 20px rgba(32,202,255,.4); }
.kpi-lbl { font-size:10.5px; color:var(--t2); margin-top:4px; }
.kpi-sub { margin-top:auto; font-size:9.5px; font-family:var(--mono); color:var(--t3); white-space:nowrap; align-self:flex-end; }

/* ═══ OVERVIEW GRID ═══ */
.ov-grid { display:grid; grid-template-columns:310px 1fr 1fr; grid-template-rows:auto auto; gap:14px; }
.ov-traffic { grid-column:1; grid-row:1/3; }
.ov-context { grid-column:2; grid-row:1; }
.ov-recent  { grid-column:3; grid-row:1; }
.ov-cams    { grid-column:2/4; grid-row:2; }

/* Traffic Light */
.tl-body { padding:18px 16px; display:flex; flex-direction:column; align-items:center; gap:0; }
.tl-housing {
  width:100px; background:var(--void);
  border-radius:14px; border:1px solid rgba(32,202,255,.12);
  padding:14px 22px; display:flex; flex-direction:column; gap:12px;
  position:relative;
  box-shadow:inset 0 2px 10px rgba(0,0,0,.5), 0 0 0 1px rgba(32,202,255,.06);
}
.tl-housing::after {
  content:''; position:absolute; bottom:-30px; left:50%; transform:translateX(-50%);
  width:5px; height:30px; background:var(--rim); border-radius:3px;
}
.tl-bulb { width:56px; height:56px; border-radius:50%; background:var(--card); border:2px solid var(--rim); display:flex; align-items:center; justify-content:center; position:relative; transition:.35s; }
.tl-bulb-inner { width:32px; height:32px; border-radius:50%; transition:.35s; }
.tl-r.on { border-color:var(--red); box-shadow:0 0 22px var(--red-glow), inset 0 0 10px rgba(255,58,92,.2); animation:tlPulse 1s infinite; }
.tl-r.on .tl-bulb-inner { background:var(--red); box-shadow:0 0 12px var(--red); }
.tl-a.on { border-color:var(--amber); box-shadow:0 0 18px var(--amber-glow); }
.tl-a.on .tl-bulb-inner { background:var(--amber); box-shadow:0 0 10px var(--amber); }
.tl-g.on { border-color:var(--green); box-shadow:0 0 18px var(--green-glow); }
.tl-g.on .tl-bulb-inner { background:var(--green); box-shadow:0 0 10px var(--green); }

.tl-countdown-wrap { margin-top:36px; text-align:center; }
.tl-countdown-label { font-size:9px; letter-spacing:2px; text-transform:uppercase; color:var(--t3); font-family:var(--mono); }
.tl-countdown { font-family:var(--mono); font-size:58px; font-weight:700; color:var(--cyan); letter-spacing:2px; line-height:1; text-shadow:0 0 24px var(--cyan-glow); }
.tl-countdown-unit { font-size:11px; color:var(--t2); margin-top:2px; }
.tl-info { margin-top:16px; width:100%; display:flex; flex-direction:column; gap:8px; }
.tl-info-row { display:flex; justify-content:space-between; align-items:center; font-size:11.5px; padding:6px 10px; border-radius:6px; background:var(--card); border:1px solid var(--rim); }
.tl-info-row .lbl { color:var(--t2); }
.tl-info-row .val { font-family:var(--mono); font-weight:700; font-size:11px; color:var(--t1); }
.tl-info-row .val.red   { color:var(--red); }
.tl-info-row .val.green { color:var(--green); }
.tl-info-row .val.amber { color:var(--amber); }
.tl-info-row .val.cyan  { color:var(--cyan); }

.tl-controls { display:grid; grid-template-columns:1fr 1fr; gap:6px; margin-top:14px; width:100%; }
.ctrl-btn {
  padding:7px; border-radius:6px; font-size:10.5px; font-weight:700;
  letter-spacing:.8px; font-family:var(--mono); transition:.18s; border:1px solid transparent;
}
.ctrl-btn:hover  { filter:brightness(1.2); transform:translateY(-1px); }
.ctrl-btn:active { transform:scale(.94); }
.ctrl-r    { background:var(--red-soft);   color:var(--red);   border-color:rgba(255,58,92,.3); }
.ctrl-a    { background:var(--amber-soft);  color:var(--amber); border-color:rgba(255,176,32,.3); }
.ctrl-g    { background:var(--green-soft);  color:var(--green); border-color:rgba(0,232,122,.3); }
.ctrl-auto { background:var(--cyan-soft);   color:var(--cyan);  border-color:rgba(32,202,255,.3); }
.ctrl-btn.ctrl-auto { grid-column:1/-1; }
.ctrl-btn.ctrl-r:hover { box-shadow:0 4px 16px rgba(255,58,92,.4); }
.ctrl-btn.ctrl-a:hover { box-shadow:0 4px 16px rgba(255,176,32,.4); }
.ctrl-btn.ctrl-g:hover { box-shadow:0 4px 16px rgba(0,232,122,.4); }

.emergency-bar {
  display:none; width:100%; margin-top:10px; padding:7px 10px; border-radius:6px;
  background:var(--red-soft); border:1px solid rgba(255,58,92,.4);
  color:var(--red); font-size:11px; font-weight:700; text-align:center;
  font-family:var(--mono); letter-spacing:1px;
  animation:emergNeon .9s ease-in-out infinite;
}

/* Context grid */
.ctx-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; padding:12px; }
.ctx-item { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:8px; background:var(--card); border:1px solid var(--rim); transition:.18s; }
.ctx-item.bad { border-color:rgba(255,58,92,.45); background:var(--red-soft); animation:ctxBad 1.2s infinite; }
.ctx-item:hover { border-color:rgba(32,202,255,.22); }
.ctx-emoji { font-size:20px; flex-shrink:0; }
.ctx-body  { flex:1; min-width:0; }
.ctx-name  { font-size:9.5px; text-transform:uppercase; letter-spacing:.8px; color:var(--t3); }
.ctx-val   { font-family:var(--mono); font-size:12.5px; font-weight:700; color:var(--t1); margin:2px 0; }
.ctx-limit { font-size:9px; color:var(--t3); }
.ctx-led { width:7px; height:7px; border-radius:50%; flex-shrink:0; transition:.3s; }
.ctx-led.ok  { background:var(--green); box-shadow:0 0 8px var(--green); animation:ctxLedOk 2.5s ease-in-out infinite; }
.ctx-led.bad { background:var(--red); box-shadow:0 0 10px var(--red-glow); animation:blink .8s infinite; }

/* Recent list */
.recent-list { padding:10px 12px; display:flex; flex-direction:column; gap:7px; max-height:320px; overflow-y:auto; }
.vcard { display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:7px; background:var(--card); border:1px solid rgba(255,255,255,.04); cursor:pointer; transition:.18s; animation:vcardSlide .3s ease; }
.vcard:hover { border-color:rgba(32,202,255,.22); background:var(--hover); transform:translateY(-1px); box-shadow:0 4px 16px rgba(32,202,255,.06); }
.vcard.new { border-color:rgba(255,58,92,.4); box-shadow:0 0 10px rgba(255,58,92,.15); }
.vcard-img { width:54px; height:38px; border-radius:5px; background:var(--void); border:1px solid var(--rim); overflow:hidden; flex-shrink:0; display:flex; align-items:center; justify-content:center; }
.vcard-img img { width:100%; height:100%; object-fit:cover; }
.vcard-img .placeholder { font-size:18px; }
.vcard-info  { flex:1; min-width:0; }
.vcard-plate { font-family:var(--mono); font-size:12.5px; font-weight:700; color:var(--red); letter-spacing:.5px; }
.vcard-meta  { font-size:9.5px; color:var(--t2); margin-top:2px; }
.vcard-tag { font-size:9px; font-weight:700; padding:2px 7px; border-radius:99px; background:var(--red-soft); color:var(--red); border:1px solid rgba(255,58,92,.3); white-space:nowrap; font-family:var(--mono); }

/* Camera row */
.cam-row { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; padding:12px; }
.cam-card { display:flex; align-items:center; gap:10px; padding:12px; border-radius:8px; background:var(--card); border:1px solid var(--rim); transition:.2s; cursor:pointer; position:relative; overflow:hidden; }
.cam-card::before { content:''; position:absolute; top:0; left:0; bottom:0; width:3px; border-radius:3px 0 0 3px; }
.cam-card.online::before  { background:var(--green); box-shadow:0 0 8px var(--green); }
.cam-card.idle::before    { background:var(--amber); }
.cam-card.offline::before { background:var(--red); animation:blink .9s infinite; }
.cam-card.online  { border-color:rgba(0,232,122,.14); }
.cam-card.offline { animation:devAlarm 2s infinite; }
.cam-card:hover   { border-color:rgba(32,202,255,.24); transform:translateY(-1px); }
.cam-icon   { font-size:26px; }
.cam-info   { flex:1; }
.cam-name   { font-size:12px; font-weight:600; }
.cam-detail { font-size:9.5px; color:var(--t2); margin-top:2px; }
.cam-status-badge { font-size:9.5px; font-weight:700; padding:3px 8px; border-radius:99px; font-family:var(--mono); white-space:nowrap; }
.cam-status-badge.online  { background:var(--green-soft);  color:var(--green);  border:1px solid rgba(0,232,122,.2); }
.cam-status-badge.idle    { background:var(--amber-soft);  color:var(--amber);  border:1px solid rgba(255,176,32,.2); }
.cam-status-badge.offline { background:var(--red-soft);    color:var(--red);    border:1px solid rgba(255,58,92,.2); }

/* ═══ VIOLATIONS ═══ */
.vio-toolbar { display:flex; align-items:center; flex-wrap:wrap; gap:10px; margin-bottom:13px; }
.search-wrap { display:flex; align-items:center; background:var(--panel); border:1px solid var(--rim); border-radius:var(--r); overflow:hidden; transition:.2s; }
.search-wrap:focus-within { border-color:rgba(32,202,255,.35); box-shadow:0 0 0 3px rgba(32,202,255,.07); }
.search-wrap svg { width:14px; margin:0 9px; color:var(--t2); flex-shrink:0; }
.search-input { background:none; border:none; color:var(--t1); font-size:12px; padding:7px 0; width:180px; }
.search-input::placeholder { color:var(--t3); }
.search-btn { padding:7px 14px; background:var(--cyan); color:var(--void); font-size:11.5px; font-weight:700; transition:.15s; }
.search-btn:hover { background:#15b5e8; }
.filter-sel { background:var(--panel); border:1px solid rgba(32,202,255,.14); color:var(--t1); padding:6px 10px; border-radius:var(--r); font-size:11.5px; cursor:pointer; transition:.18s; }
.filter-sel:focus { border-color:rgba(32,202,255,.38); box-shadow:0 0 0 3px rgba(32,202,255,.07); }
.btn-ghost { background:none; border:1px solid var(--rim); color:var(--t2); padding:6px 10px; border-radius:var(--r); font-size:11.5px; transition:.15s; }
.btn-ghost:hover { border-color:rgba(32,202,255,.28); color:var(--t1); }
.export-btns { display:flex; gap:7px; margin-left:auto; }
.exp-btn { padding:7px 14px; border-radius:var(--r); font-size:11.5px; font-weight:600; transition:.18s; }
.exp-btn.csv { background:var(--green-soft); color:var(--green); border:1px solid rgba(0,232,122,.25); }
.exp-btn.csv:hover { background:var(--green); color:var(--void); box-shadow:0 0 12px var(--green-glow); }
.exp-btn.pdf { background:var(--card); color:var(--t2); border:1px solid var(--rim); }
.exp-btn.pdf:hover { border-color:rgba(32,202,255,.28); color:var(--t1); }

.vio-table-wrap { overflow-x:auto; }
.vio-table { width:100%; border-collapse:collapse; font-size:12px; }
.vio-table thead tr { position:sticky; top:0; z-index:1; }
.vio-table th { padding:10px 13px; background:var(--card); text-align:left; font-size:10px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--t2); border-bottom:1px solid var(--rim); white-space:nowrap; }
.vio-table td { padding:9px 13px; border-bottom:1px solid rgba(15,23,40,.8); color:var(--t1); white-space:nowrap; transition:background .12s; }
.vio-table tbody tr { cursor:pointer; }
.vio-table tbody tr:hover td { background:rgba(32,202,255,.05); }
.vio-table tbody tr:hover td:first-child { box-shadow:inset 3px 0 0 var(--cyan); }
.cell-plate { font-family:var(--mono); font-weight:700; font-size:13px; color:var(--red); letter-spacing:.5px; text-shadow:0 0 10px rgba(255,58,92,.25); }
.light-chip { display:inline-block; font-family:var(--mono); font-size:10px; font-weight:700; padding:2px 8px; border-radius:99px; }
.light-chip.red   { background:var(--red-soft);   color:var(--red);   border:1px solid rgba(255,58,92,.3); }
.light-chip.amber { background:var(--amber-soft);  color:var(--amber); border:1px solid rgba(255,176,32,.3); }
.conf-wrap { display:flex; align-items:center; gap:6px; }
.conf-bar  { width:46px; height:3px; background:var(--card); border-radius:2px; overflow:hidden; }
.conf-fill { height:100%; border-radius:2px; background:var(--green); transition:width .5s; }
.conf-val  { font-family:var(--mono); font-size:10px; color:var(--t2); }
.thumb-img { width:48px; height:34px; object-fit:cover; border-radius:4px; border:1px solid var(--rim); cursor:pointer; transition:.18s; }
.thumb-img:hover { border-color:rgba(32,202,255,.35); transform:scale(1.06); }
.act-btn { padding:4px 10px; border-radius:5px; font-size:10.5px; font-weight:700; background:var(--cyan-soft); color:var(--cyan); border:1px solid rgba(32,202,255,.25); transition:.15s; }
.act-btn:hover { background:var(--cyan); color:var(--void); }
.no-data-row td { text-align:center; color:var(--t2); padding:40px; font-size:12px; }

.table-foot { display:flex; align-items:center; justify-content:space-between; padding:10px 14px; border-top:1px solid var(--rim); background:var(--card); }
.t-count  { font-size:10.5px; color:var(--t2); font-family:var(--mono); }
.page-ctrl{ display:flex; align-items:center; gap:10px; }
.page-btn { padding:5px 12px; border-radius:5px; font-size:11.5px; background:var(--card); color:var(--t2); border:1px solid var(--rim); transition:.15s; }
.page-btn:hover { background:var(--cyan-soft); color:var(--cyan); border-color:rgba(32,202,255,.28); }
.page-info { font-family:var(--mono); font-size:11px; color:var(--t2); }

/* ═══ CAMERA LIVE ═══ */
.cam-grid { display:grid; grid-template-columns:1fr 300px; gap:14px; height:calc(100vh - var(--topbar) - 36px - 32px); }
.cam-main { display:flex; flex-direction:column; }
.cam-ph-right { display:flex; align-items:center; gap:10px; }
.cam-sel { background:var(--panel); border:1px solid rgba(32,202,255,.15); color:var(--t1); padding:5px 10px; border-radius:5px; font-size:11px; transition:.18s; }
.cam-sel:focus { border-color:rgba(32,202,255,.38); box-shadow:0 0 0 3px rgba(32,202,255,.07); outline:none; }
.live-dot { font-size:10px; font-family:var(--mono); font-weight:700; color:var(--red); padding:3px 8px; border-radius:99px; background:var(--red-soft); border:1px solid rgba(255,58,92,.3); animation:blink 1s infinite; }

/* ── Camera Viewport (neon corners 2026) ── */
.cam-viewport {
  flex:1; position:relative; background:#000; overflow:hidden; min-height:0;
  border:1px solid rgba(32,202,255,.14);
  box-shadow:0 0 0 1px rgba(32,202,255,.05), inset 0 0 40px rgba(0,0,0,.4);
}
.cam-viewport::before {
  content:''; position:absolute; top:8px; left:8px;
  width:22px; height:22px;
  border-top:2px solid rgba(32,202,255,.45);
  border-left:2px solid rgba(32,202,255,.45);
  z-index:10; pointer-events:none;
}
.cam-viewport::after {
  content:''; position:absolute; bottom:8px; right:8px;
  width:22px; height:22px;
  border-bottom:2px solid rgba(32,202,255,.45);
  border-right:2px solid rgba(32,202,255,.45);
  z-index:10; pointer-events:none;
}
.cam-img    { width:100%; height:100%; object-fit:contain; display:block; }
.cam-canvas { position:absolute; inset:0; pointer-events:none; z-index:5; }
.cam-ov-top { position:absolute; top:0; left:0; right:0; z-index:6; padding:8px 12px; background:linear-gradient(to bottom, rgba(0,0,0,.75), transparent); display:flex; justify-content:space-between; align-items:center; }
.cam-ts { font-family:var(--mono); font-size:11.5px; color:#fff; }
.cam-light-tag { font-family:var(--mono); font-size:10px; font-weight:700; padding:2px 9px; border-radius:99px; }
.cam-light-tag.red   { background:rgba(255,58,92,.8);  color:#fff; }
.cam-light-tag.amber { background:rgba(255,176,32,.8); color:#000; }
.cam-light-tag.green { background:rgba(0,232,122,.8);  color:#000; }
.cam-ov-bot { position:absolute; bottom:0; left:0; right:0; z-index:6; padding:8px 12px; background:linear-gradient(to top, rgba(0,0,0,.75), transparent); display:flex; gap:16px; }
.cam-stat   { font-size:11px; color:rgba(255,255,255,.7); }
.cam-stat b { color:var(--cyan); font-family:var(--mono); }
.roi-overlay { position:absolute; z-index:4; left:5%; right:5%; bottom:28%; height:2px; background:var(--red); box-shadow:0 0 10px var(--red); }
.roi-overlay::after { content:'VẠCH DỪNG · ROI'; position:absolute; right:0; top:-16px; font-size:8.5px; font-family:var(--mono); font-weight:700; color:var(--red); letter-spacing:1px; }

/* ── Scanline (neon upgrade) ── */
.cam-scanline {
  position:absolute; inset:0; pointer-events:none; z-index:3;
  background:linear-gradient(to bottom, transparent 0%, rgba(32,202,255,.035) 50%, transparent 100%);
  animation:scanNeon 3.5s linear infinite;
}

.ai-bar { display:flex; border-top:1px solid var(--rim); background:var(--card); flex-shrink:0; }
.ai-stat { flex:1; padding:9px 13px; border-right:1px solid var(--rim); transition:background .18s; }
.ai-stat:last-child { border-right:none; }
.ai-stat:hover { background:rgba(32,202,255,.04); }
.ai-lbl { font-size:9px; text-transform:uppercase; letter-spacing:1px; color:var(--t3); display:block; }
.ai-val { font-family:var(--mono); font-size:11px; font-weight:700; color:var(--t1); display:block; margin-top:2px; }

.cam-side { display:flex; flex-direction:column; gap:12px; }
.det-list { padding:9px; display:flex; flex-direction:column; gap:5px; max-height:240px; overflow-y:auto; }
.det-item { display:flex; align-items:center; gap:8px; padding:7px 9px; border-radius:6px; background:var(--card); border:1px solid rgba(32,202,255,.1); font-size:11px; animation:vcardSlide .25s ease; transition:.18s; }
.det-item:hover { border-color:rgba(32,202,255,.28); background:rgba(32,202,255,.04); transform:translateX(3px); }
.det-type  { font-family:var(--mono); font-weight:700; color:var(--cyan); min-width:55px; }
.det-plate { font-family:var(--mono); font-weight:700; color:var(--amber); flex:1; }
.det-conf  { font-family:var(--mono); font-size:10px; color:var(--t3); }
.det-flag  { font-size:9px; font-weight:700; padding:1px 5px; border-radius:3px; background:var(--red-soft); color:var(--red); }
.cam-log   { padding:8px 10px; font-family:var(--mono); font-size:10px; line-height:1.9; overflow-y:auto; flex:1; }
.log-l.info { color:var(--cyan); }
.log-l.ok   { color:var(--green); text-shadow:0 0 8px rgba(0,232,122,.3); }
.log-l.warn { color:var(--amber); }
.log-l.err  { color:var(--red); text-shadow:0 0 8px rgba(255,58,92,.35); }
.log-footer { padding:6px 10px; border-top:1px solid var(--rim); display:flex; justify-content:flex-end; }
.clear-log  { font-size:10px; background:none; color:var(--t3); border:1px solid var(--rim); padding:2px 8px; border-radius:4px; transition:.15s; }
.clear-log:hover { background:var(--red-soft); color:var(--red); }

/* ═══════════════════════════════════════════════════════════════
   ★★★ LAPTOP CAMERA SECTION ★★★
═══════════════════════════════════════════════════════════════ */

/* ── Top control bar (neon upgraded) ── */
.lap-topbar {
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px; margin-bottom:14px;
  background:linear-gradient(135deg, rgba(32,202,255,.06) 0%, rgba(13,22,40,0) 100%);
  border:1px solid rgba(32,202,255,.20);
  border-radius:var(--r2);
  box-shadow:0 2px 28px rgba(0,0,0,.45), 0 0 0 1px rgba(32,202,255,.05);
}
.lap-topbar-l  { display:flex; align-items:center; gap:14px; }
.lap-brand-icon     { width:52px; height:52px; flex-shrink:0; }
.lap-brand-icon svg { width:52px; height:52px; }
.lap-title    { font-size:15px; font-weight:700; color:var(--t1); letter-spacing:.2px; }
.lap-subtitle { font-size:10.5px; color:var(--t2); margin-top:3px; }
.lap-topbar-r { display:flex; align-items:center; gap:10px; }
.lap-status-pill {
  display:flex; align-items:center; gap:7px;
  padding:6px 14px; border-radius:99px;
  background:var(--card); border:1px solid var(--rim);
  font-size:11px; color:var(--t2);
}
.lap-status-dot { width:7px; height:7px; border-radius:50%; background:var(--t3); flex-shrink:0; transition:.3s; }
.lap-status-dot.active { background:var(--green); box-shadow:0 0 8px var(--green-glow); animation:ledPulse 2s infinite; }
.lap-status-dot.error  { background:var(--red); }

.lap-btn-start {
  display:flex; align-items:center; gap:7px;
  padding:9px 18px; border-radius:var(--r);
  background:var(--green); color:var(--void);
  font-size:12px; font-weight:700; letter-spacing:.3px;
  transition:.2s; box-shadow:0 0 0 1px rgba(0,232,122,.3);
}
.lap-btn-start:hover { background:#00d470; box-shadow:0 0 20px var(--green-glow); transform:translateY(-1px); }
.lap-btn-start:active { transform:scale(.96); }
.lap-btn-start:disabled { background:var(--t3); color:var(--void); box-shadow:none; cursor:not-allowed; transform:none; }
.lap-btn-stop {
  display:flex; align-items:center; gap:7px;
  padding:9px 16px; border-radius:var(--r);
  background:var(--red-soft); color:var(--red);
  border:1px solid rgba(255,58,92,.35);
  font-size:12px; font-weight:700; transition:.2s;
}
.lap-btn-stop:hover:not(:disabled) { background:var(--red); color:#fff; box-shadow:0 0 16px var(--red-glow); }
.lap-btn-stop:disabled { opacity:.35; cursor:not-allowed; }

/* ── Main grid ── */
.lap-grid { display:grid; grid-template-columns:1fr 340px; gap:14px; align-items:start; }
.lap-feed-col { display:flex; flex-direction:column; gap:14px; }

/* ── Viewport (neon corners) ── */
.lap-viewport-panel { display:flex; flex-direction:column; }
.lap-viewport {
  position:relative; background:#000; overflow:hidden;
  aspect-ratio:16/9; min-height:360px; max-height:480px;
  border:1px solid rgba(32,202,255,.16);
  box-shadow:0 0 0 1px rgba(32,202,255,.06), inset 0 0 48px rgba(0,0,0,.45);
}
.lap-viewport::before {
  content:''; position:absolute; top:8px; left:8px;
  width:22px; height:22px;
  border-top:2px solid rgba(32,202,255,.45);
  border-left:2px solid rgba(32,202,255,.45);
  z-index:10; pointer-events:none;
}
.lap-viewport::after {
  content:''; position:absolute; bottom:8px; right:8px;
  width:22px; height:22px;
  border-bottom:2px solid rgba(32,202,255,.45);
  border-right:2px solid rgba(32,202,255,.45);
  z-index:10; pointer-events:none;
}

/* ── Idle overlay ── */
.lap-idle {
  position:absolute; inset:0; display:flex; flex-direction:column;
  align-items:center; justify-content:center; gap:14px;
  background:radial-gradient(ellipse at center, rgba(32,202,255,.05) 0%, #000 70%);
  z-index:10;
}
.lap-idle-rings { position:absolute; inset:0; pointer-events:none; overflow:hidden; }
.lap-ring { position:absolute; top:50%; left:50%; border-radius:50%; border:1px solid rgba(32,202,255,.14); transform:translate(-50%,-50%); animation:lapRing 3s ease-out infinite; }
.lap-ring.r1 { width:200px; height:200px; animation-delay:0s; }
.lap-ring.r2 { width:340px; height:340px; animation-delay:1s; }
.lap-ring.r3 { width:480px; height:480px; animation-delay:2s; }
.lap-idle-icon { width:80px; height:80px; position:relative; z-index:1; }
.lap-idle-title { font-size:16px; font-weight:700; color:var(--t1); position:relative; z-index:1; }
.lap-idle-desc { font-size:12px; color:var(--t2); text-align:center; line-height:1.6; position:relative; z-index:1; }
.lap-idle-desc strong { color:var(--cyan); }
.lap-btn-start-big { padding:11px 28px; font-size:13px; position:relative; z-index:1; box-shadow:0 0 24px rgba(0,232,122,.28); }

/* ── Feed ── */
.lap-feed-img { width:100%; height:100%; object-fit:cover; display:block; }
.lap-canvas   { position:absolute; inset:0; pointer-events:none; z-index:5; width:100%; height:100%; }

/* ── HUD overlays ── */
.lap-hud-top {
  position:absolute; top:0; left:0; right:0; z-index:8;
  padding:10px 14px;
  background:linear-gradient(to bottom, rgba(0,0,0,.8), transparent);
  display:flex; justify-content:space-between; align-items:center;
}
.lap-hud-left  { display:flex; align-items:center; gap:10px; }
.lap-hud-right { display:flex; align-items:center; gap:8px; }
.lap-ts { font-family:var(--mono); font-size:12px; color:#fff; }
.lap-fps-tag { font-family:var(--mono); font-size:10px; font-weight:700; padding:2px 8px; border-radius:99px; background:rgba(0,0,0,.55); border:1px solid rgba(32,202,255,.35); color:var(--cyan); }
.lap-source-tag { font-family:var(--mono); font-size:9.5px; font-weight:700; padding:2px 8px; border-radius:99px; background:rgba(32,202,255,.16); border:1px solid rgba(32,202,255,.38); color:var(--cyan); }
.lap-source-badge { font-family:var(--mono); font-size:9.5px; font-weight:700; padding:3px 10px; border-radius:99px; background:var(--cyan-soft); border:1px solid rgba(32,202,255,.28); color:var(--cyan); }

.lap-hud-bot {
  position:absolute; bottom:0; left:0; right:0; z-index:8;
  padding:10px 14px;
  background:linear-gradient(to top, rgba(0,0,0,.8), transparent);
  display:flex; gap:20px;
}
.lap-hud-stat span { display:block; font-size:9px; text-transform:uppercase; letter-spacing:.5px; color:rgba(255,255,255,.5); }
.lap-hud-stat b    { font-family:var(--mono); color:var(--cyan); font-size:12px; }

.lap-roi { bottom:27%; }

/* ── Context panel ── */
.lap-ctx-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; padding:12px; }
.lap-ctx-item { padding:10px 12px; border-radius:8px; background:var(--card); border:1px solid rgba(32,202,255,.09); transition:.18s; }
.lap-ctx-item:hover { border-color:rgba(32,202,255,.24); }
.lap-ctx-header { display:flex; align-items:center; gap:6px; margin-bottom:7px; }
.lap-ctx-emoji { font-size:16px; flex-shrink:0; }
.lap-ctx-name  { font-size:9.5px; text-transform:uppercase; letter-spacing:.7px; color:var(--t3); flex:1; }
.lap-ctx-val   { font-family:var(--mono); font-size:11px; font-weight:700; color:var(--t1); white-space:nowrap; }
.lap-ctx-track { height:3px; background:rgba(32,202,255,.06); border-radius:2px; overflow:hidden; margin-bottom:5px; border:1px solid rgba(32,202,255,.08); }
.lap-ctx-fill  { height:100%; border-radius:2px; background:var(--amber); transition:width .6s; }
.lap-ctx-fill.ok  { background:var(--green); box-shadow:0 0 6px rgba(0,232,122,.3); }
.lap-ctx-fill.bad { background:var(--red); animation:blink 1s infinite; box-shadow:0 0 6px rgba(255,58,92,.4); }
.lap-ctx-limit { font-size:8.5px; color:var(--t3); display:block; }

/* ── Right column ── */
.lap-right-col { display:flex; flex-direction:column; gap:12px; }
.lap-test-body  { padding:14px; display:flex; flex-direction:column; gap:14px; }
.lap-test-label { font-size:10px; text-transform:uppercase; letter-spacing:.8px; color:var(--t3); margin-bottom:8px; }

.lap-plate-row { display:flex; gap:7px; }
.lap-plate-input {
  flex:1; background:var(--void); border:1px solid rgba(32,202,255,.14); color:var(--t1);
  padding:8px 12px; border-radius:var(--r); font-size:13px; font-family:var(--mono);
  letter-spacing:1px; transition:.18s; text-transform:uppercase;
}
.lap-plate-input::placeholder { color:var(--t3); font-size:11px; letter-spacing:0; text-transform:none; }
.lap-plate-input:focus { border-color:rgba(32,202,255,.38); box-shadow:0 0 0 3px rgba(32,202,255,.08); }
.lap-scan-btn { padding:8px 14px; border-radius:var(--r); background:var(--cyan); color:var(--void); font-size:11.5px; font-weight:700; transition:.18s; white-space:nowrap; }
.lap-scan-btn:hover { background:#15b5e8; transform:translateY(-1px); box-shadow:0 0 14px rgba(32,202,255,.4); }

.lap-scan-result { margin-top:10px; padding:12px 14px; border-radius:var(--r); background:var(--card); border:1px solid rgba(32,202,255,.22); animation:vcardSlide .25s ease; }
.lap-scan-plate { font-family:var(--mono); font-size:18px; font-weight:700; color:var(--red); letter-spacing:1px; }
.lap-scan-info  { font-size:10.5px; color:var(--t2); margin-top:5px; }

.lap-snap-btn {
  width:100%; padding:10px; border-radius:var(--r);
  background:var(--amber-soft); color:var(--amber);
  border:1px solid rgba(255,176,32,.35);
  font-size:12px; font-weight:700; transition:.2s;
  box-shadow:0 0 0 1px rgba(255,176,32,.1);
}
.lap-snap-btn:hover { background:var(--amber); color:var(--void); box-shadow:0 0 18px var(--amber-glow); transform:translateY(-1px); }

.lap-light-btns { display:grid; grid-template-columns:1fr 1fr; gap:6px; }

.lap-demo-seed-btn {
  width:100%; padding:10px; border-radius:var(--r);
  background:linear-gradient(135deg, rgba(255,176,32,.14), rgba(255,58,92,.09));
  color:var(--amber); border:1px solid rgba(255,176,32,.32);
  font-size:12px; font-weight:700; transition:.2s;
}
.lap-demo-seed-btn:hover { background:var(--amber); color:var(--void); box-shadow:0 0 16px var(--amber-glow); transform:translateY(-1px); }

/* ── Gallery ── */
.lap-gallery { padding:10px 12px; display:grid; grid-template-columns:repeat(auto-fill, minmax(80px,1fr)); gap:7px; max-height:170px; overflow-y:auto; }
.lap-gal-item { position:relative; cursor:pointer; border-radius:6px; overflow:hidden; border:1px solid rgba(32,202,255,.1); aspect-ratio:4/3; background:var(--void); transition:.2s; }
.lap-gal-item:hover { border-color:rgba(32,202,255,.45); transform:scale(1.05); box-shadow:0 0 18px rgba(32,202,255,.16); }
.lap-gal-item img { width:100%; height:100%; object-fit:cover; display:block; }
.lap-gal-item .lap-gal-label { position:absolute; bottom:0; left:0; right:0; padding:2px 4px; font-size:8px; font-family:var(--mono); background:rgba(0,0,0,.7); color:var(--cyan); text-overflow:ellipsis; overflow:hidden; white-space:nowrap; }
.lap-gal-item .lap-gal-ts    { position:absolute; top:3px; right:3px; font-size:7.5px; font-family:var(--mono); background:rgba(0,0,0,.7); color:var(--t2); padding:1px 4px; border-radius:3px; }

/* ═══ DEVICES ═══ */
.dev-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(260px,1fr)); gap:12px; margin-bottom:14px; }
.dev-card { background:var(--panel); border:1px solid rgba(32,202,255,.1); border-radius:var(--r2); padding:16px; transition:.2s; position:relative; overflow:hidden; cursor:default; }
.dev-card::before { content:''; position:absolute; left:0; top:0; bottom:0; width:3px; border-radius:3px 0 0 3px; }
.dev-card.online::before  { background:var(--green); box-shadow:0 0 8px var(--green); }
.dev-card.idle::before    { background:var(--amber); }
.dev-card.offline::before { background:var(--red); animation:blink .9s infinite; }
.dev-card.online  { border-color:rgba(0,232,122,.12); }
.dev-card.offline { animation:devAlarm 2s infinite; }
.dev-card:hover   { border-color:rgba(32,202,255,.24); transform:translateY(-2px); box-shadow:0 12px 40px rgba(0,0,0,.5); }
.dev-head  { display:flex; align-items:center; gap:10px; margin-bottom:12px; }
.dev-emoji { font-size:26px; }
.dev-name  { font-size:13px; font-weight:700; }
.dev-ip    { font-family:var(--mono); font-size:9.5px; color:var(--t2); margin-top:2px; }
.dev-status { margin-left:auto; font-size:9.5px; font-weight:700; padding:3px 9px; border-radius:99px; font-family:var(--mono); }
.dev-status.online  { background:var(--green-soft);  color:var(--green); }
.dev-status.idle    { background:var(--amber-soft);  color:var(--amber); }
.dev-status.offline { background:var(--red-soft);    color:var(--red); }
.dev-stats  { display:grid; grid-template-columns:1fr 1fr; gap:7px; }
.dev-stat   { font-size:10px; color:var(--t2); }
.dev-stat strong { display:block; font-family:var(--mono); font-size:11.5px; color:var(--t1); margin-top:1px; }

/* ── ThingsBoard ── */
.tb-panel .ph { gap:10px; }
.tb-dot { width:8px; height:8px; border-radius:50%; background:var(--t3); flex-shrink:0; }
.tb-dot.live { background:var(--green); box-shadow:0 0 8px var(--green-glow); animation:ledPulse 2s infinite; }
.tb-metrics { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; padding:14px 16px; }
.tb-m-label { font-size:10.5px; color:var(--t2); margin-bottom:5px; }
.tb-m-bar   { height:3px; background:var(--void); border-radius:2px; overflow:hidden; margin-bottom:3px; position:relative; }
.tb-m-fill  { height:100%; border-radius:2px; background:var(--cyan); transition:width .6s; position:relative; overflow:hidden; }
.tb-m-fill::after { content:''; position:absolute; inset:0; background:linear-gradient(90deg, transparent, rgba(255,255,255,.18) 50%, transparent); animation:barShimmer 2.8s linear infinite; }
.tb-m-fill.g { background:var(--green); }
.tb-m-fill.a { background:var(--amber); }
.tb-m-fill.r { background:var(--red); }
.tb-m-val   { font-family:var(--mono); font-size:10.5px; color:var(--t2); }

.alert-list { padding:9px 14px; display:flex; flex-direction:column; gap:6px; max-height:160px; overflow-y:auto; }
.alert-item { display:flex; align-items:center; gap:9px; padding:7px 10px; border-radius:6px; background:var(--card); border:1px solid rgba(32,202,255,.1); font-size:11px; animation:vcardSlide .25s ease; transition:.18s; }
.alert-item:hover { background:rgba(32,202,255,.04); border-left-color:var(--cyan); }
.alert-item.warn { border-color:rgba(255,176,32,.22); }
.alert-item.warn:hover { border-left-color:var(--amber); }
.alert-item.err  { border-color:rgba(255,58,92,.22); }
.alert-item.err:hover  { border-left-color:var(--red); }
.alert-icon { font-size:13px; flex-shrink:0; }
.alert-msg  { flex:1; color:var(--t1); }
.alert-time { font-family:var(--mono); font-size:9.5px; color:var(--t3); white-space:nowrap; }

/* ═══ STATS ═══ */
.stats-grid { display:grid; grid-template-columns:1fr 1fr; grid-template-rows:auto auto; gap:14px; }
.chart-wide  { grid-column:1/-1; }
.chart-area  { padding:14px; position:relative; background:rgba(5,8,15,.45); border-radius:8px; border:1px solid rgba(32,202,255,.07); }
.donut-wrap  { display:flex; align-items:center; gap:20px; padding:14px; }
.donut-wrap canvas { filter:drop-shadow(0 0 8px rgba(32,202,255,.18)); }
.donut-legend{ display:flex; flex-direction:column; gap:10px; }
.leg-item    { display:flex; align-items:center; gap:8px; font-size:11px; }
.leg-dot     { width:9px; height:9px; border-radius:50%; flex-shrink:0; }
.leg-lbl     { color:var(--t2); flex:1; }
.leg-val     { font-family:var(--mono); font-weight:700; color:var(--t1); }
.stats-table { padding:14px; display:flex; flex-direction:column; }
.st-row { display:flex; justify-content:space-between; align-items:center; padding:9px 0; border-bottom:1px solid rgba(15,23,40,.9); font-size:12px; }
.st-row:last-child { border-bottom:none; }
.st-n { color:var(--t2); }
.st-v { font-family:var(--mono); font-weight:700; }
.st-v.r { color:var(--red); }
.st-v.g { color:var(--green); }
.st-v.a { color:var(--amber); }
.st-v.c { color:var(--cyan); }

/* ═══ SETTINGS ═══ */
.settings-grid { display:grid; grid-template-columns:1fr 320px; gap:14px; }
.settings-body { padding:18px 20px; display:flex; flex-direction:column; gap:22px; }
.sg { }
.sg-title { font-size:10px; font-weight:700; letter-spacing:1.2px; text-transform:uppercase; color:var(--cyan); margin-bottom:11px; padding-bottom:7px; border-bottom:1px solid var(--rim); }
.sg-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:9px; font-size:12px; }
.sg-row label { color:var(--t2); }
.sg-input { background:var(--void); border:1px solid rgba(32,202,255,.14); color:var(--t1); padding:6px 10px; border-radius:6px; font-size:11.5px; width:170px; font-family:var(--mono); transition:.18s; }
.sg-input:focus { border-color:rgba(32,202,255,.38); box-shadow:0 0 0 3px rgba(32,202,255,.08); outline:none; }
.sg-actions { display:flex; gap:9px; padding-top:6px; }
.btn-primary { padding:9px 22px; border-radius:var(--r); background:var(--cyan); color:var(--void); font-size:12px; font-weight:700; letter-spacing:.3px; transition:.2s; box-shadow:0 0 0 1px rgba(32,202,255,.3); }
.btn-primary:hover { background:#15b5e8; box-shadow:0 0 20px rgba(32,202,255,.4); transform:translateY(-1px); }
.btn-sec { padding:9px 22px; border-radius:var(--r); background:none; color:var(--t2); border:1px solid var(--rim); font-size:12px; font-weight:600; transition:.18s; }
.btn-sec:hover { border-color:rgba(32,202,255,.28); color:var(--t1); }
.sysinfo { padding:13px 15px; display:flex; flex-direction:column; }
.si-row  { display:flex; justify-content:space-between; font-size:11.5px; padding:8px 0; border-bottom:1px solid rgba(15,23,40,.9); }
.si-row:last-child { border-bottom:none; }
.si-row:nth-child(odd) { background:rgba(32,202,255,.022); }
.si-k { color:var(--t2); }
.si-v { font-family:var(--mono); font-weight:700; color:var(--t1); }
.sys-btns { display:grid; grid-template-columns:1fr 1fr; gap:7px; padding:13px 15px; }
.sys-btn { padding:8px; border-radius:var(--r); font-size:11px; font-weight:600; background:var(--card); color:var(--t2); border:1px solid var(--rim); transition:.18s; }
.sys-btn:hover:not(.danger) { border-color:rgba(32,202,255,.35); color:var(--cyan); background:var(--cyan-soft); box-shadow:0 0 12px rgba(32,202,255,.18); }
.sys-btn.danger:hover { border-color:rgba(255,58,92,.35); color:var(--red); background:var(--red-soft); box-shadow:0 0 12px rgba(255,58,92,.18); }

/* ═══ MODAL (neon upgraded) ═══ */
.modal { display:none; position:fixed; inset:0; z-index:9999; align-items:center; justify-content:center; }
.modal.open { display:flex; }
.modal-bg { position:absolute; inset:0; background:rgba(3,6,13,.82); -webkit-backdrop-filter:blur(7px); backdrop-filter:blur(7px); cursor:pointer; }
.modal-box {
  position:relative; background:var(--panel);
  border:1px solid rgba(32,202,255,.22);
  border-radius:14px; max-width:860px; width:95%; max-height:92vh; overflow-y:auto;
  box-shadow:0 0 60px rgba(32,202,255,.08), 0 0 100px rgba(0,0,0,.7);
  animation:mIn .22s ease;
}
.modal-close { position:absolute; right:12px; top:12px; width:28px; height:28px; border-radius:50%; background:var(--card); border:1px solid var(--rim); color:var(--t2); font-size:13px; display:flex; align-items:center; justify-content:center; transition:.15s; z-index:1; }
.modal-close:hover { background:var(--red-soft); color:var(--red); border-color:rgba(255,58,92,.3); }
.modal-head { padding:18px 22px 14px; border-bottom:1px solid var(--rim); background:linear-gradient(135deg, rgba(32,202,255,.07), rgba(0,232,122,.03)); }
.modal-id   { font-family:var(--mono); font-size:10px; color:var(--t3); letter-spacing:1px; }
.modal-plate-big { font-family:var(--mono); font-size:32px; font-weight:700; color:var(--red); margin-top:4px; letter-spacing:1px; text-shadow:0 0 20px rgba(255,58,92,.4), 0 0 40px rgba(255,58,92,.15); }
.modal-body     { display:grid; grid-template-columns:1fr 280px; }
.modal-img-col  { border-right:1px solid var(--rim); position:relative; }
.modal-image    { width:100%; height:auto; display:block; }
.modal-img-foot { padding:7px 13px; background:var(--card); font-family:var(--mono); font-size:10.5px; color:var(--t2); display:flex; justify-content:space-between; border-top:1px solid var(--rim); }
.modal-meta { padding:18px; display:flex; flex-direction:column; gap:14px; }
.mm-row  { display:flex; align-items:flex-start; gap:11px; }
.mm-ico  { width:30px; height:30px; border-radius:7px; display:flex; align-items:center; justify-content:center; font-size:15px; flex-shrink:0; background:var(--card); }
.mm-ico.r { background:var(--red-soft); }
.mm-ico.a { background:var(--amber-soft); }
.mm-ico.c { background:var(--cyan-soft); }
.mm-ico.g { background:var(--green-soft); }
.mm-label { font-size:9.5px; color:var(--t3); text-transform:uppercase; letter-spacing:.6px; }
.mm-val   { font-family:var(--mono); font-size:12.5px; font-weight:700; color:var(--t1); margin-top:3px; }
.modal-foot { display:flex; gap:9px; padding:13px 18px; border-top:1px solid var(--rim); background:var(--card); }
.mf-btn { padding:8px 16px; border-radius:var(--r); font-size:11.5px; font-weight:600; transition:.15s; }
.mf-btn.primary { background:var(--cyan); color:var(--void); }
.mf-btn.primary:hover { background:#15b5e8; box-shadow:0 0 14px rgba(32,202,255,.35); }
.mf-btn.sec { background:none; border:1px solid var(--rim); color:var(--t2); }
.mf-btn.sec:hover { border-color:rgba(32,202,255,.28); color:var(--t1); }
.mf-btn.danger { background:none; border:1px solid rgba(255,58,92,.3); color:var(--red); margin-left:auto; }
.mf-btn.danger:hover { background:var(--red); color:#fff; box-shadow:0 0 14px var(--red-glow); }

/* ═══ TOAST ═══ */
#toasts { position:fixed; right:18px; bottom:18px; display:flex; flex-direction:column; gap:7px; z-index:99999; pointer-events:none; }
.toast { padding:11px 16px; border-radius:var(--r); font-size:12px; font-weight:500; min-width:230px; max-width:340px; display:flex; align-items:center; gap:9px; pointer-events:all; animation:toastIn .25s ease; background:var(--panel); border:1px solid; -webkit-backdrop-filter:blur(14px); backdrop-filter:blur(14px); }
.toast.err  { border-color:rgba(255,58,92,.48);  color:var(--red);   box-shadow:0 0 20px rgba(255,58,92,.16); }
.toast.ok   { border-color:rgba(0,232,122,.42);  color:var(--green); box-shadow:0 0 18px rgba(0,232,122,.12); }
.toast.warn { border-color:rgba(255,176,32,.42); color:var(--amber); box-shadow:0 0 18px rgba(255,176,32,.12); }
.toast.info { border-color:rgba(32,202,255,.35); color:var(--cyan);  box-shadow:0 0 18px rgba(32,202,255,.10); }

/* ═══ UTILITY ═══ */
.no-data { text-align:center; padding:28px; color:var(--t3); font-size:12px; }

/* ═══ RESPONSIVE ═══ */
@media (max-width:1440px) {
  .ov-grid { grid-template-columns:290px 1fr 1fr; }
}
@media (max-width:1280px) {
  .ov-grid { grid-template-columns:280px 1fr; grid-template-rows:auto auto auto; }
  .ov-cams { grid-column:1/-1; grid-row:3; }
  .kpi-row { grid-template-columns:repeat(2,1fr); }
  .lap-grid { grid-template-columns:1fr; }
  .lap-right-col { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
}
@media (max-width:960px) {
  :root { --sb:200px; }
  .cam-grid      { grid-template-columns:1fr; }
  .modal-body    { grid-template-columns:1fr; }
  .stats-grid    { grid-template-columns:1fr; }
  .settings-grid { grid-template-columns:1fr; }
  .lap-ctx-grid  { grid-template-columns:1fr 1fr; }
}
@media (max-width:768px) {
  :root { --sb:180px; --topbar:50px; }
  .kpi-row { grid-template-columns:1fr 1fr; }
  .ov-grid { grid-template-columns:1fr; }
  .cam-row { grid-template-columns:1fr 1fr; }
  .tb-metrics { grid-template-columns:1fr 1fr; }
  .lap-ctx-grid { grid-template-columns:1fr; }
}

/* ═══════════════════════════════════════════════════════════════
   3D TILT EFFECTS — PREMIUM 2026 UPGRADE
   Full CSS-only 3D perspective tilt system + JS-enhanced depth
   Every card, panel, KPI, modal — tilts with neon depth glow
═══════════════════════════════════════════════════════════════ */

/* ── 3D TILT FOUNDATION ── */
:root {
  --tilt-max:         12deg;
  --tilt-speed:       0.35s;
  --tilt-ease:        cubic-bezier(.23,1,.32,1);
  --tilt-z-lift:      24px;
  --tilt-perspective: 900px;
  --tilt-shine-size:  160%;
  --tilt-depth-c:     rgba(32,202,255,0.22);
  --tilt-depth-r:     rgba(255,58,92,0.22);
  --tilt-depth-g:     rgba(0,232,122,0.22);
  --tilt-depth-a:     rgba(255,176,32,0.22);
  --tilt-depth-v:     rgba(162,89,255,0.22);
}

/* ── TILT WRAPPER — base class applied via JS ── */
.tilt-wrap {
  transform-style: preserve-3d;
  perspective: var(--tilt-perspective);
  will-change: transform;
  position: relative;
}
.tilt-card {
  transform-style: preserve-3d;
  transform: perspective(var(--tilt-perspective)) rotateX(0deg) rotateY(0deg) translateZ(0);
  transition: transform var(--tilt-speed) var(--tilt-ease),
              box-shadow var(--tilt-speed) var(--tilt-ease),
              border-color var(--tilt-speed) var(--tilt-ease);
  will-change: transform;
  position: relative;
}
.tilt-card:hover {
  transform: perspective(var(--tilt-perspective)) rotateX(0deg) rotateY(0deg) translateZ(var(--tilt-z-lift));
}

/* ── TILT SHINE — glossy reflection layer ── */
.tilt-shine {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 99;
  opacity: 0;
  background: radial-gradient(
    circle at 50% 0%,
    rgba(255,255,255,0.18) 0%,
    rgba(255,255,255,0.06) 30%,
    transparent 65%
  );
  transition: opacity var(--tilt-speed) var(--tilt-ease), background 0.1s;
  mix-blend-mode: screen;
}
.tilt-card:hover .tilt-shine { opacity: 1; }

/* ── TILT DEPTH — bottom shadow layer for 3D ground effect ── */
.tilt-depth {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: transparent;
  transition: box-shadow var(--tilt-speed) var(--tilt-ease);
}
.tilt-card:hover .tilt-depth {
  box-shadow: 0 40px 80px -20px rgba(0,0,0,0.75),
              0 12px 30px -8px rgba(32,202,255,0.15);
}

/* ── TILT EDGE — neon edge glow that intensifies with tilt ── */
.tilt-edge {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 98;
  opacity: 0;
  border: 1px solid transparent;
  transition: opacity var(--tilt-speed) var(--tilt-ease),
              border-color var(--tilt-speed) var(--tilt-ease),
              box-shadow var(--tilt-speed) var(--tilt-ease);
}
.tilt-card:hover .tilt-edge {
  opacity: 1;
  border-color: rgba(32,202,255,0.35);
  box-shadow: inset 0 0 24px rgba(32,202,255,0.06);
}

/* ── KPI CARDS — 3D tilt with color-matched depth ── */
.kpi.tilt-card {
  transform-origin: center center;
}
.kpi.tilt-card:hover {
  transform: perspective(var(--tilt-perspective))
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(20px);
}
.kpi.c-red.tilt-card:hover  .tilt-edge { border-color:rgba(255,58,92,0.45);  box-shadow:inset 0 0 24px rgba(255,58,92,0.07); }
.kpi.c-green.tilt-card:hover .tilt-edge { border-color:rgba(0,232,122,0.45); box-shadow:inset 0 0 24px rgba(0,232,122,0.07); }
.kpi.c-amber.tilt-card:hover .tilt-edge { border-color:rgba(255,176,32,0.45);box-shadow:inset 0 0 24px rgba(255,176,32,0.07); }
.kpi.c-cyan.tilt-card:hover  .tilt-edge { border-color:rgba(32,202,255,0.45); box-shadow:inset 0 0 24px rgba(32,202,255,0.07); }
.kpi.c-red.tilt-card:hover  .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.75), 0 12px 30px -8px var(--tilt-depth-r); }
.kpi.c-green.tilt-card:hover .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.75), 0 12px 30px -8px var(--tilt-depth-g); }
.kpi.c-amber.tilt-card:hover .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.75), 0 12px 30px -8px var(--tilt-depth-a); }
.kpi.c-cyan.tilt-card:hover  .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.75), 0 12px 30px -8px var(--tilt-depth-c); }

/* ── PANEL — 3D tilt wrapper ── */
.panel.tilt-card {
  transform-origin: center center;
}
.panel.tilt-card:hover {
  transform: perspective(var(--tilt-perspective))
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(16px);
  border-color: rgba(32,202,255,0.32);
  box-shadow: 0 32px 60px -16px rgba(0,0,0,0.65),
              0 0 40px rgba(32,202,255,0.08);
}

/* ── VCARD — 3D tilt for recent violations ── */
.vcard.tilt-card {
  transform-origin: center center;
}
.vcard.tilt-card:hover {
  transform: perspective(calc(var(--tilt-perspective) * 0.7))
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(12px);
  box-shadow: 0 18px 40px -10px rgba(0,0,0,0.55),
              0 0 20px rgba(32,202,255,0.07);
}
.vcard.new.tilt-card:hover {
  box-shadow: 0 18px 40px -10px rgba(0,0,0,0.55),
              0 0 20px rgba(255,58,92,0.15);
}

/* ── DEV CARD — 3D tilt for IoT devices ── */
.dev-card.tilt-card:hover {
  transform: perspective(var(--tilt-perspective))
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(18px);
  box-shadow: 0 28px 56px -14px rgba(0,0,0,0.65),
              0 0 30px rgba(32,202,255,0.08);
}
.dev-card.online.tilt-card:hover .tilt-edge {
  border-color: rgba(0,232,122,0.35);
  box-shadow: inset 0 0 20px rgba(0,232,122,0.06);
}
.dev-card.offline.tilt-card:hover .tilt-edge {
  border-color: rgba(255,58,92,0.35);
}

/* ── CAM CARD — 3D tilt for camera status tiles ── */
.cam-card.tilt-card:hover {
  transform: perspective(calc(var(--tilt-perspective) * 0.8))
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(14px);
}
.cam-card.online.tilt-card:hover .tilt-edge {
  border-color: rgba(0,232,122,0.3);
  box-shadow: inset 0 0 16px rgba(0,232,122,0.05);
}

/* ── AI INSIGHTS CHIP — 3D tilt for metric chips ── */
.ai-insights-chip.tilt-card {
  display: inline-flex;
}
.ai-insights-chip.tilt-card:hover {
  transform: perspective(600px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(8px);
  box-shadow: 0 8px 20px -4px rgba(0,0,0,0.4),
              0 0 12px rgba(32,202,255,0.12);
}

/* ── AI INSIGHTS ITEM (sidebar) — subtle 3D ── */
.ai-insights-item.tilt-card:hover {
  transform: perspective(500px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(6px);
  box-shadow: 0 6px 16px -4px rgba(0,0,0,0.4),
              0 0 10px rgba(32,202,255,0.10);
}

/* ── GALLERY ITEM — 3D tilt for snapshots ── */
.lap-gal-item.tilt-card:hover {
  transform: perspective(400px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(10px)
             scale(1.03);
  box-shadow: 0 12px 28px -6px rgba(0,0,0,0.55),
              0 0 16px rgba(32,202,255,0.14);
}

/* ── THUMB IMAGE — micro 3D tilt ── */
.thumb-img.tilt-card:hover {
  transform: perspective(300px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(8px)
             scale(1.05);
  box-shadow: 0 8px 20px -4px rgba(0,0,0,0.5),
              0 0 12px var(--tilt-depth-c);
}

/* ── MODAL BOX — deep 3D tilt entrance ── */
.modal-box.tilt-card {
  transform-origin: center center;
}
.modal-box.tilt-card:hover {
  transform: perspective(1200px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(10px);
}

/* ── CONTROL BUTTONS — 3D press effect ── */
.ctrl-btn.tilt-card:hover {
  transform: perspective(400px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(10px);
}
.ctrl-btn.tilt-card:active {
  transform: perspective(400px) rotateX(4deg) translateZ(2px) scale(0.95);
  transition-duration: 0.08s;
}

/* ── BUTTONS (primary, secondary, snap, scan) — 3D lift ── */
.btn-primary.tilt-card:hover,
.lap-btn-start.tilt-card:hover,
.lap-snap-btn.tilt-card:hover,
.lap-scan-btn.tilt-card:hover,
.lap-demo-seed-btn.tilt-card:hover {
  transform: perspective(600px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(12px);
}
.btn-primary.tilt-card:active,
.lap-btn-start.tilt-card:active {
  transform: perspective(600px) rotateX(3deg) translateZ(3px) scale(0.97);
  transition-duration: 0.08s;
}

/* ── VIOLATION TABLE ROWS — 3D row hover lift ── */
.vio-table tbody tr.tilt-row {
  transform-style: preserve-3d;
  transition: transform 0.2s var(--tilt-ease), background 0.12s;
}
.vio-table tbody tr.tilt-row:hover {
  transform: perspective(800px) translateZ(6px);
}
.vio-table tbody tr.tilt-row:hover td {
  background: rgba(32,202,255,0.05);
  box-shadow: inset 3px 0 0 var(--cyan);
}

/* ── TRAFFIC LIGHT HOUSING — 3D depth tilt ── */
.tl-housing.tilt-card:hover {
  transform: perspective(500px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(14px);
  box-shadow: inset 0 2px 10px rgba(0,0,0,.5),
              0 20px 40px -10px rgba(0,0,0,0.6),
              0 0 30px rgba(32,202,255,0.06);
}

/* ── TL INFO ROW — subtle row tilt ── */
.tl-info-row.tilt-card:hover {
  transform: perspective(600px)
             rotateY(var(--ry, 0deg))
             translateZ(6px);
  border-color: rgba(32,202,255,0.25);
  background: var(--hover);
}

/* ── CONTEXT ITEMS — 3D tilt ── */
.ctx-item.tilt-card:hover {
  transform: perspective(600px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(10px);
  box-shadow: 0 10px 24px -6px rgba(0,0,0,0.5),
              0 0 16px rgba(32,202,255,0.06);
}
.lap-ctx-item.tilt-card:hover {
  transform: perspective(600px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(8px);
  box-shadow: 0 8px 20px -4px rgba(0,0,0,0.45),
              0 0 12px rgba(32,202,255,0.06);
}

/* ── DETECTION ITEMS — horizontal slide + 3D ── */
.det-item.tilt-card:hover {
  transform: perspective(600px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(8px) translateX(3px);
  box-shadow: 0 6px 16px -4px rgba(0,0,0,0.45),
              0 0 10px rgba(32,202,255,0.08);
}

/* ── ALERT ITEM — 3D subtle ── */
.alert-item.tilt-card:hover {
  transform: perspective(600px)
             rotateX(var(--rx, 0deg))
             translateZ(6px);
  border-color: rgba(32,202,255,0.22);
}

/* ── TOAST — 3D entrance + tilt ── */
.toast.tilt-card {
  transform-origin: right center;
}
.toast.tilt-card:hover {
  transform: perspective(600px)
             rotateY(calc(var(--ry, 0deg) * 0.5))
             translateZ(8px);
}

/* ── SYSTEM INFO ROW — micro 3D ── */
.si-row.tilt-card:hover {
  transform: perspective(800px) translateZ(4px) translateX(2px);
  background: rgba(32,202,255,0.04);
}

/* ── SYS BUTTON — 3D press ── */
.sys-btn.tilt-card:hover {
  transform: perspective(500px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(8px);
}
.sys-btn.tilt-card:active {
  transform: perspective(500px) rotateX(4deg) translateZ(2px);
  transition-duration: 0.08s;
}

/* ── PAGE TITLE — 3D text tilt on topbar ── */
.page-title.tilt-text {
  display: inline-block;
  transition: transform var(--tilt-speed) var(--tilt-ease),
              text-shadow var(--tilt-speed) var(--tilt-ease);
}
.page-title.tilt-text:hover {
  transform: perspective(400px) rotateY(-4deg) translateZ(4px);
  text-shadow: 3px 0 12px rgba(32,202,255,0.5);
}

/* ── CLOCK — 3D depth text ── */
.sb-clock.tilt-text {
  display: block;
  transition: transform var(--tilt-speed) var(--tilt-ease),
              text-shadow var(--tilt-speed) var(--tilt-ease);
}
.sb-clock.tilt-text:hover {
  transform: perspective(300px) rotateX(-3deg) translateZ(6px);
  text-shadow: 0 4px 16px var(--cyan-glow), 0 0 40px rgba(32,202,255,0.25);
}

/* ── TRAFFIC COUNTDOWN — 3D hover ── */
.tl-countdown.tilt-text:hover {
  transform: perspective(400px) rotateX(-4deg) translateZ(8px);
  text-shadow: 0 4px 20px var(--cyan-glow), 0 0 60px rgba(32,202,255,0.2);
}

/* ── SIDEBAR BRAND — 3D tilt logo area ── */
.sb-brand.tilt-card:hover {
  transform: perspective(600px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(8px);
}

/* ── NAV ITEM — 3D pop on hover ── */
.nav-item.tilt-card:hover {
  transform: perspective(500px)
             rotateY(var(--ry, 0deg))
             translateZ(8px) translateX(3px);
}
.nav-item.active.tilt-card {
  transform: perspective(500px) translateZ(4px) translateX(2px);
}

/* ── WEATHER PILL — 3D micro tilt ── */
.weather-pill.tilt-card:hover {
  transform: perspective(400px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(6px);
  box-shadow: 0 6px 16px -4px rgba(0,0,0,0.4),
              0 0 10px rgba(32,202,255,0.08);
}

/* ── USER AVATAR — 3D spin ── */
.user-av.tilt-card:hover {
  transform: perspective(300px)
             rotateY(var(--ry, 0deg))
             rotateX(var(--rx, 0deg))
             translateZ(6px);
  box-shadow: 0 6px 18px -4px rgba(0,0,0,0.45),
              0 0 14px var(--cyan-glow);
}

/* ── LAP STATUS PILL — 3D ── */
.lap-status-pill.tilt-card:hover {
  transform: perspective(400px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(6px);
}

/* ── TB METRIC ── */
.tb-metric.tilt-card:hover {
  transform: perspective(500px)
             rotateX(var(--rx, 0deg))
             translateZ(8px);
  opacity: 1;
}
.tb-metric.tilt-card:hover .tb-m-label { color: var(--t1); }

/* ── EXPORT BUTTONS — 3D ── */
.exp-btn.tilt-card:hover {
  transform: perspective(500px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(9px);
}
.exp-btn.tilt-card:active {
  transform: perspective(500px) rotateX(4deg) translateZ(2px);
  transition-duration: 0.08s;
}

/* ── MODAL FOOT BUTTONS — 3D ── */
.mf-btn.tilt-card:hover {
  transform: perspective(400px)
             rotateX(var(--rx, 0deg))
             rotateY(var(--ry, 0deg))
             translateZ(8px);
}
.mf-btn.primary.tilt-card:hover { box-shadow: 0 10px 24px -6px rgba(0,0,0,0.5), 0 0 16px var(--tilt-depth-c); }
.mf-btn.danger.tilt-card:hover  { box-shadow: 0 10px 24px -6px rgba(0,0,0,0.5), 0 0 16px var(--tilt-depth-r); }

/* ── PAGE BUTTONS (pagination) — 3D ── */
.page-btn.tilt-card:hover {
  transform: perspective(400px)
             rotateX(var(--rx, 0deg))
             translateZ(6px);
}

/* ── SEARCH BUTTON — 3D ── */
.search-btn.tilt-card:hover {
  transform: perspective(400px) rotateX(var(--rx, 0deg)) translateZ(8px);
}

/* ── TILT COLOR THEMES — depth glow variants ── */
.tilt-card.tilt-cyan:hover  .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.7), 0 12px 30px -8px var(--tilt-depth-c); }
.tilt-card.tilt-red:hover   .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.7), 0 12px 30px -8px var(--tilt-depth-r); }
.tilt-card.tilt-green:hover .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.7), 0 12px 30px -8px var(--tilt-depth-g); }
.tilt-card.tilt-amber:hover .tilt-depth { box-shadow:0 40px 80px -20px rgba(0,0,0,.7), 0 12px 30px -8px var(--tilt-depth-a); }
.tilt-card.tilt-violet:hover .tilt-depth{ box-shadow:0 40px 80px -20px rgba(0,0,0,.7), 0 12px 30px -8px var(--tilt-depth-v); }

.tilt-card.tilt-cyan:hover  .tilt-edge  { border-color:rgba(32,202,255,0.4);  box-shadow:inset 0 0 20px rgba(32,202,255,0.06); }
.tilt-card.tilt-red:hover   .tilt-edge  { border-color:rgba(255,58,92,0.4);   box-shadow:inset 0 0 20px rgba(255,58,92,0.06); }
.tilt-card.tilt-green:hover .tilt-edge  { border-color:rgba(0,232,122,0.4);   box-shadow:inset 0 0 20px rgba(0,232,122,0.06); }
.tilt-card.tilt-amber:hover .tilt-edge  { border-color:rgba(255,176,32,0.4);  box-shadow:inset 0 0 20px rgba(255,176,32,0.06); }
.tilt-card.tilt-violet:hover .tilt-edge { border-color:rgba(162,89,255,0.4);  box-shadow:inset 0 0 20px rgba(162,89,255,0.06); }

/* ── TILT KEYFRAMES ── */
@keyframes tiltIn {
  from { transform: perspective(var(--tilt-perspective)) rotateX(8deg) rotateY(-4deg) translateZ(0) scale(0.97); opacity: 0; }
  to   { transform: perspective(var(--tilt-perspective)) rotateX(0deg) rotateY(0deg) translateZ(0) scale(1); opacity: 1; }
}
@keyframes tiltFloat {
  0%,100% { transform: perspective(var(--tilt-perspective)) rotateX(1.5deg) rotateY(0.5deg) translateZ(8px); }
  33%     { transform: perspective(var(--tilt-perspective)) rotateX(-1deg) rotateY(1deg) translateZ(10px); }
  66%     { transform: perspective(var(--tilt-perspective)) rotateX(0.5deg) rotateY(-1.5deg) translateZ(8px); }
}
@keyframes tiltPulse {
  0%,100% { transform: perspective(var(--tilt-perspective)) rotateX(0deg) rotateY(0deg) translateZ(0); }
  50%     { transform: perspective(var(--tilt-perspective)) rotateX(1deg) rotateY(0.5deg) translateZ(10px); }
}
@keyframes tiltShine {
  0%   { background-position:-200% 0; opacity:0; }
  20%  { opacity:1; }
  100% { background-position:200% 0; opacity:0; }
}
@keyframes tiltReveal {
  from { opacity:0; transform: perspective(900px) rotateX(12deg) translateY(20px) scale(0.96); }
  to   { opacity:1; transform: perspective(900px) rotateX(0deg) translateY(0) scale(1); }
}

/* ── ANIMATED TILT — elements that auto-tilt without hover ── */
.tilt-float {
  animation: tiltFloat 6s ease-in-out infinite;
  transform-style: preserve-3d;
}
.tilt-pulse {
  animation: tiltPulse 4s ease-in-out infinite;
  transform-style: preserve-3d;
}
.tilt-reveal {
  animation: tiltReveal 0.5s cubic-bezier(.23,1,.32,1) both;
}

/* ── TILT SHINE SWEEP — scan line that sweeps across on hover ── */
.tilt-shine-sweep::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 100;
  opacity: 0;
  background: linear-gradient(
    105deg,
    transparent 30%,
    rgba(255,255,255,0.09) 50%,
    transparent 70%
  );
  background-size: 200% 100%;
  transition: opacity 0.1s;
}
.tilt-card:hover .tilt-shine-sweep::after,
.tilt-shine-sweep:hover::after {
  opacity: 1;
  animation: tiltShine 0.8s ease-in-out;
}

/* ── SECTION CARDS — 3D reveal on section enter ── */
.section.active .panel { animation: tiltReveal 0.4s cubic-bezier(.23,1,.32,1) both; }
.section.active .panel:nth-child(1) { animation-delay: 0.04s; }
.section.active .panel:nth-child(2) { animation-delay: 0.08s; }
.section.active .panel:nth-child(3) { animation-delay: 0.12s; }
.section.active .panel:nth-child(4) { animation-delay: 0.16s; }
.section.active .kpi { animation: tiltReveal 0.35s cubic-bezier(.23,1,.32,1) both; }
.section.active .kpi:nth-child(1) { animation-delay: 0.02s; }
.section.active .kpi:nth-child(2) { animation-delay: 0.05s; }
.section.active .kpi:nth-child(3) { animation-delay: 0.08s; }
.section.active .kpi:nth-child(4) { animation-delay: 0.11s; }
.section.active .dev-card { animation: tiltReveal 0.4s cubic-bezier(.23,1,.32,1) both; }
.section.active .dev-card:nth-child(1) { animation-delay: 0.03s; }
.section.active .dev-card:nth-child(2) { animation-delay: 0.07s; }
.section.active .dev-card:nth-child(3) { animation-delay: 0.11s; }
.section.active .dev-card:nth-child(4) { animation-delay: 0.15s; }
.section.active .vcard  { animation-delay: calc(var(--i, 0) * 0.04s); }
.section.active .ai-insights-chip { animation: tiltReveal 0.3s cubic-bezier(.23,1,.32,1) both; }
.section.active .ai-insights-chip:nth-child(n) { animation-delay: calc(var(--i, 0) * 0.03s); }

/* ── JS TILT SUPPORT — CSS custom properties driven by JavaScript ── */
/* JS sets --rx and --ry on each element via: el.style.setProperty('--rx', ...) */
/* This block ensures all tilt-card elements respond to the custom properties */
.tilt-card {
  --rx: 0deg;
  --ry: 0deg;
}

/* ── PERFORMANCE: GPU acceleration for all tilt elements ── */
.tilt-card,
.tilt-wrap,
.tilt-shine,
.tilt-depth,
.tilt-edge,
.tilt-float,
.tilt-pulse,
.tilt-text {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -webkit-transform-style: preserve-3d;
  transform-style: preserve-3d;
}

/* ── REDUCED MOTION — respect user preference ── */
@media (prefers-reduced-motion: reduce) {
  .tilt-card,
  .tilt-card:hover,
  .tilt-float,
  .tilt-pulse,
  .tilt-text:hover,
  .tilt-text.tilt-text:hover,
  .section.active .panel,
  .section.active .kpi,
  .section.active .dev-card {
    animation: none !important;
    transform: none !important;
    transition: background 0.2s, border-color 0.2s, color 0.2s !important;
  }
}

/* ═══════════════════════════════════════════════════════════════
   3D TILT JS ENGINE — embedded script target classes
   Add class="tilt-card tilt-[color]" to any element.
   JS reads mouse position relative to element center,
   computes rotateX/Y, writes --rx/--ry CSS custom props.
   Pure CSS fallback is built into all selectors above.
═══════════════════════════════════════════════════════════════ */
/* Target: data-tilt attribute for JS auto-init */
[data-tilt] { cursor: default; }
[data-tilt="cyan"]   { --tilt-color: rgba(32,202,255,0.3); }
[data-tilt="red"]    { --tilt-color: rgba(255,58,92,0.3); }
[data-tilt="green"]  { --tilt-color: rgba(0,232,122,0.3); }
[data-tilt="amber"]  { --tilt-color: rgba(255,176,32,0.3); }
[data-tilt="violet"] { --tilt-color: rgba(162,89,255,0.3); }
[data-tilt]:hover .tilt-edge { border-color: var(--tilt-color, rgba(32,202,255,0.3)); }


/* ═══════════════════════════════════════════════════════════════
   TILT JS ENGINE — paste into main.js or HTML <script> tag
   Reads mouse pos → updates --rx, --ry per element in real-time

   USAGE:
     <div class="tilt-card tilt-cyan" data-tilt="cyan">
       <div class="tilt-shine"></div>
       <div class="tilt-edge"></div>
       <div class="tilt-depth"></div>
       ...your content...
     </div>

   SCRIPT (add once at bottom of HTML):
   ─────────────────────────────────────
   (function(){
     const TILT_MAX = 12, TILT_EASE = 0.12;
     const state = new WeakMap();
     function lerp(a,b,t){ return a+(b-a)*t; }
     function initTilt(el){
       if(state.has(el)) return;
       let rx=0,ry=0,rxt=0,ryt=0,raf=null;
       function tick(){
         rx=lerp(rx,rxt,TILT_EASE); ry=lerp(ry,ryt,TILT_EASE);
         el.style.setProperty('--rx', rx.toFixed(3)+'deg');
         el.style.setProperty('--ry', ry.toFixed(3)+'deg');
         if(Math.abs(rx-rxt)>0.02||Math.abs(ry-ryt)>0.02) raf=requestAnimationFrame(tick);
       }
       el.addEventListener('mousemove',e=>{
         const r=el.getBoundingClientRect();
         const mx=(e.clientX-r.left)/r.width-.5;
         const my=(e.clientY-r.top)/r.height-.5;
         rxt=-my*TILT_MAX; ryt=mx*TILT_MAX;
         if(!raf) raf=requestAnimationFrame(tick);
       });
       el.addEventListener('mouseleave',()=>{
         rxt=0; ryt=0;
         if(!raf) raf=requestAnimationFrame(tick);
       });
       state.set(el,true);
     }
     function initAll(){
       document.querySelectorAll('.tilt-card,[data-tilt]').forEach(initTilt);
     }
     document.addEventListener('DOMContentLoaded',initAll);
     const obs=new MutationObserver(()=>initAll());
     obs.observe(document.body,{childList:true,subtree:true});
   })();
   ─────────────────────────────────────
   END TILT ENGINE
═══════════════════════════════════════════════════════════════ */